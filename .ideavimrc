""" Map leader to space ---------------------
let mapleader = " "

""" Plugins  --------------------------------
set surround
set multiple-cursors
set commentary

""" Common settings -------------------------
set clipboard+=unnamed
set showmode
set showcmd
set scrolloff=0
set incsearch
set hlsearch
set number
set ignorecase

""" Idea specific settings ------------------
" https://github.com/JetBrains/ideavim/wiki/set-commands
set ideajoin
set ideastatusicon=gray
set idearefactormode=keep

" NERDTree plugin
set NERDTree
nmap <C-n> :NERDTreeToggle<CR>
nmap <leader>e :NERDTreeFocus<CR>

" which-key plugin
" https://github.com/TheBlob42/idea-which-key
set which-key
" set notimeout
let g:WhichKey_ShowVimActions = "true"

let g:WhichKey_FontFamily = "D2CodingLigature Nerd Font"
let g:WhichKey_FontSize = 14
let g:WhichKey_KeyStyle = "bold"
let g:WhichKey_KeyColor = "68a3d7"
let g:WhichKey_PrefixStyle = "none"
let g:WhichKey_PrefixColor = "4bb058"
let g:WhichKey_CommandStyle = "none"
let g:WhichKey_CommandColor = "ff7f8d"

let g:WhichKeyDesc_close_buffer = "<leader>x Close buffer"
let g:WhichKeyDesc_window = "<leader>w Window"
let g:WhichKeyDesc_menu = "<leader>m Menu"
let g:WhichKeyDesc_file = "<leader>f File"
let g:WhichKeyDesc_file_recent = "<leader>fr Recent"
let g:WhichKeyDesc_code = "<leader>c Code"
let g:WhichKeyDesc_run = "<leader>r Run"
let g:WhichKeyDesc_debug = "<leader>d Debug"
let g:WhichKeyDesc_hierarchy = "<leader>h Hierarchy"
let g:WhichKeyDesc_collapse = "<leader>z collapse"

" highlightedyank plugin
set highlightedyank
let g:highlightedyank_highlight_duration = "500"
let g:highlightedyank_highlight_color = "rgba(160, 160, 160, 155)"
nmap <leader>w <Action>(SaveAll)

" location
nmap <C-i> <Action>(Back)
nmap <C-o> <Action>(Forward)

" buffer
nmap <leader>xx <Action>(CloseContent)
nmap <leader>xa <Action>(CloseAllEditors)
nmap <leader>xo <Action>(CloseAllEditorsButActive)
nmap <leader>xp <Action>(CloseAllUnpinnedEditors)

" window
nmap <leader>wp <Action>(PinActiveEditorTab)
nmap <leader>wl <Action>(TabList)

nmap <leader>w1 <Action>(GoToTab1)
nmap <leader>w2 <Action>(GoToTab2)
nmap <leader>w3 <Action>(GoToTab3)
nmap <leader>w4 <Action>(GoToTab4)
nmap <leader>w5 <Action>(GoToTab5)
nmap <leader>w6 <Action>(GoToTab6)
nmap <leader>w7 <Action>(GoToTab7)
nmap <leader>w8 <Action>(GoToTab8)
nmap <leader>w9 <Action>(GoToTab9)

" tab
nmap <Tab> <Action>(NextTab)
nmap <S-Tab> <Action>(PreviousTab)
nmap <C-h> <C-w>h
nmap <C-j> <C-w>j
nmap <C-k> <C-w>k
nmap <C-l> <C-w>l

" menu
nmap <leader>mm <Action>(MainMenu)
nmap <leader>ma <Action>(AnalyzeMenu)
nmap <leader>mb <Action>(BuildMenu)
nmap <leader>mc <Action>(CodeMenu)
nmap <leader>mf <Action>(FindMenuGroup)
nmap <leader>mg <Action>(GoToMenu)
nmap <leader>ms <Action>(ScopeViewPopupMenu)
nmap <leader>mt <Action>(EditorTabPopupMenu)
nmap <leader>mw <Action>(ToolWindowsGroup)
nmap <leader>gg <Action>(Git.Menu)

" file
nmap <leader>fo <Action>(OpenFile)
nmap <leader>fs <Action>(FileStructurePopup)
nmap <leader>frf <Action>(RecentFiles)
nmap <leader>frl <Action>(RecentLocations)
nmap <leader>fh <Action>(LocalHistory.ShowHistory)
nmap <leader>fs <Action>(SelectIn)
nmap <leader>ff <Action>(SearchEverywhere)

" code
nmap <leader>ca <Action>(ShowIntentionActions)
nmap <leader>co <Action>(OverrideMethods)
nmap <leader>ci <Action>(ImplementMethods)
nmap <leader>cf <Action>(ReformatCode)
nmap <leader>cc <Action>(InspectCode)
nmap <leader>cs <Action>(SelectAllOccurrences)
nmap <leader>cg <Action>(Generate)
nmap <leader>ct <Action>(GoToTest)
nmap <leader>cu <Action>(ShowUsages)

" run
nmap <leader>rc <Action>(ContextRun)
nmap <leader>rx <Action>(Run)
nmap <leader>rr <Action>(Rerun)
nmap <leader>rt <Action>(RunTests)
nmap <leader>rs <Action>(Stop)

" debug
nmap <leader>dc <Action>(ContextDebug)
nmap <leader>dx <Action>(Debug)
nmap <leader>db <Action>(ToggleLineBreakpoint)
nmap <leader>de <Action>(EditBreakpoint)
nmap <leader>dv <Action>(ViewBreakpoints)

" refactor
nmap <leader>re <Action>(Refactorings.QuickListPopupAction)
nmap <leader>oi <Action>(OptimizeImports)

" hierarchy
nmap <leader>hc <Action>(CallHierarchy)
nmap <leader>hm <Action>(MethodHierarchy)
nmap <leader>ht <Action>(TypeHierarchy)

" collapse
nmap zz <Action>(ExpandCollapseToggleAction)
nmap za <Action>(CollapseAllRegions)
nmap zA <Action>(ExpandAllRegions)

" zen
" nmap <leader>z <Action>(ToggleZenMode)

" Error / Diagnostic
nmap ]d <Action>(GotoNextError)
nmap [d <Action>(GotoPreviousError)
nmap <leader>lf <Action>(ShowErrorDescription)

" goto
nmap <leader>a <Action>(GotoAction)
nmap ga <Action>(GotoAction)
nmap gc <Action>(GotoClass)
nmap gf <Action>(GotoFile)
nmap gs <Action>(GotoSymbol)
nmap gt <Action>(GoToTest)
nmap gT <Action>(TextSearchAction)
nmap go <Action>(GotoSuperMethod)
nmap gd <Action>(GotoDeclaration)
nmap gD <Action>(GotoTypeDeclaration)
nmap gi <Action>(GotoImplementation)
nmap gI <Action>(QuickImplementations)
nmap gn <Action>(ShowNavBar)
nmap <leader>sd <Action>(QuickJavaDoc)

" Terminal
" nmap <leader>h <Action>(ActivateTerminalToolWindow)
nmap <A-h> <Action>(ActivateTerminalToolWindow)

" shift
vnoremap < <gv
vnoremap > >gv

" ESC
noremap <ESC> <ESC>:noh<CR>

" ideavim
nmap \\v <Action>(VimActions)
